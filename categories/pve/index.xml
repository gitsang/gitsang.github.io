<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pve on Sang's Blog</title><link>https://gitsang.github.io/categories/pve/</link><description>Recent content in Pve on Sang's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 08 Feb 2025 11:15:25 +0800</lastBuildDate><atom:link href="https://gitsang.github.io/categories/pve/index.xml" rel="self" type="application/rss+xml"/><item><title>i440fx vs q35</title><link>https://gitsang.github.io/p/i440fx-vs-q35/</link><pubDate>Sat, 08 Feb 2025 11:15:25 +0800</pubDate><guid>https://gitsang.github.io/p/i440fx-vs-q35/</guid><description>&lt;h2 id="differences">&lt;a href="#differences" class="header-anchor">&lt;/a>Differences
&lt;/h2>&lt;p>这个问题似乎在社区中，并没有被广泛的讨论，大多数讨论都认为两个芯片组并无明显差
异&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>。比较详细的讨论是 Rediit 中的这篇讨论&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>一个常被提到的区别是，q35 原生支持 PCIE，而 i440fx 并不完全支持。因此通常在进行
GPU 直通时，可能会优先使用 q35（Reddit 中有人提到 i440fx 会将 PCIE 设备模拟成
PCI，但仍然以 PCIE 速度运行，所以可能也并不会有明显区别&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>）。&lt;/p>
&lt;p>另外，在 reddit 中，有人提到 i440fx 支持热插拔，所以据说可以将 GPU 删除以允许
VM 保存状态而不是暂停/关闭？这反过来允许 VM 在运行时使用完成快照。&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>&lt;/p>
&lt;p>在这个回复中，有人提到 q35 的限制&lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>: Limited IO space can affect the number
of devices used by a single Q35 machine（有限的 IO 空间可能会影响单个 Q35 机
器使用的设备数量），这个问题我似乎在某篇直通文章中见过有人提到当 GPU 和 USB 设
备超过一定数量时，会导致虚拟机无法启动，但记不起细节了。&lt;/p>
&lt;p>另一篇文章&lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup>则提到：&lt;code>很长一段时间以来，q35 不被建议用于 GPU 直通，因为某些部 分没有完全解决&lt;/code>，这似乎与主流文章（至少是国内大部分文章）描述不一致，但文章中并
没有详细说明这些问题。我一直在使用 q35 进行 GPU 直通，而目前并没有遇到过 q35 带
来的问题。&lt;/p>
&lt;h2 id="reference">&lt;a href="#reference" class="header-anchor">&lt;/a>Reference
&lt;/h2>&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://forum.proxmox.com/threads/q35-vs-i440fx.112147/" target="_blank" rel="noopener"
>q35 vs i440fx | Proxmox Support Forum&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/VFIO/comments/5ireij/differencesbenefits_between_i440fx_and_q35/" target="_blank" rel="noopener"
>Differences/benefits between i440fx and q35 chipsets? : r/VFIO&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbafh86/?utm_source=share&amp;amp;utm_medium=web3x&amp;amp;utm_name=web3xcss&amp;amp;utm_term=1&amp;amp;utm_content=share_button" target="_blank" rel="noopener"
>https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbafh86/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbagbbd/?utm_source=share&amp;amp;utm_medium=web3x&amp;amp;utm_name=web3xcss&amp;amp;utm_term=1&amp;amp;utm_content=share_button" target="_blank" rel="noopener"
>https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbagbbd/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbb2e01/?utm_source=share&amp;amp;utm_medium=web3x&amp;amp;utm_name=web3xcss&amp;amp;utm_term=1&amp;amp;utm_content=share_button" target="_blank" rel="noopener"
>https://www.reddit.com/r/VFIO/comments/5ireij/comment/dbb2e01/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button&lt;/a>&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6">
&lt;p>&lt;a class="link" href="https://altechnative.net/virtualized-windows-10-i440fx-vs-q35/" target="_blank" rel="noopener"
>Virtualized Windows 10 – i440FX vs Q35&lt;/a>&amp;#160;&lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>PVE move vm disks to another storage</title><link>https://gitsang.github.io/p/pve-move-vm-disks-to-another-storage/</link><pubDate>Fri, 07 Feb 2025 15:04:52 +0800</pubDate><guid>https://gitsang.github.io/p/pve-move-vm-disks-to-another-storage/</guid><description>&lt;h2 id="step-by-step">&lt;a href="#step-by-step" class="header-anchor">&lt;/a>Step by step
&lt;/h2>&lt;h3 id="1-move-vm-disks-file-to-another-storage">&lt;a href="#1-move-vm-disks-file-to-another-storage" class="header-anchor">&lt;/a>1. Move vm disks file to another storage
&lt;/h3>&lt;p>Just move file or in UI use &lt;code>Hardware -&amp;gt; Disk -&amp;gt; Disk Action -&amp;gt; Move Storage&lt;/code>&lt;/p>
&lt;h3 id="2-configure-vm-config-file">&lt;a href="#2-configure-vm-config-file" class="header-anchor">&lt;/a>2. Configure vm config file
&lt;/h3>&lt;p>Config &lt;code>/etc/pve/nodes/{node_name}/qemu-server/{vm_number}.conf&lt;/code> and change
all old disk path to new disk path. (Especially the snapshot config)&lt;/p></description></item></channel></rss>